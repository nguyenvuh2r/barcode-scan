<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Barcode Scanner</title>
</head>
<body>
<input type="file" id="fileInput" accept="image/*">
<button onclick="handleUpload()">Upload & Scan</button>
<div id="result"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/zbar.js/0.3.0/zbar.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-load-image/2.24.0/load-image.all.min.js"></script>
<script>
function handleUpload() {
  var fileInput = document.getElementById('fileInput');
  var file = fileInput.files[0];

  if (!file) {
    alert('Please select an image file.');
    return;
  }

  loadImage(
    file,
    function (img) {
      var canvas = document.createElement('canvas');
      var context = canvas.getContext('2d');
      canvas.width = img.width;
      canvas.height = img.height;
      context.drawImage(img, 0, 0, img.width, img.height);
      
      var imageData = context.getImageData(0, 0, img.width, img.height);
      var code = zbarScanner.scan(imageData);
      if (code) {
        document.getElementById('result').innerText = 'Barcode content: ' + code;
      } else {
        document.getElementById('result').innerText = 'No barcode found.';
      }
    },
    { orientation: true, canvas: true }
  );
}
</script>
</body>
</html>
